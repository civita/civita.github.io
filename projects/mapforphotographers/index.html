<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="google-site-verification" content="qHIGKStShpF1nx-b_eFUBbwWxftiOnPdPhOJfX37XIs"> <meta http-equiv="Permissions-Policy" content="interest-cohort=()"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>Map of Photographers | Michael L. Chang</title> <meta name="author" content="Michael L. Chang"> <meta name="description" content="An Android app created to introduce photographers to new scenic spots"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.css"> <link rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?19f3075a2d19613090fe9e16b564e1fe" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%8C%9D&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://civita.github.io/projects/mapforphotographers/"> <link rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?e74e74bf055e5729d44a7d031a5ca6a5" media="none" id="highlight_theme_dark"> <script src="/assets/js/theme.js?96d6b3e1c3604aca8b6134c7afdd5db6"></script> <script src="/assets/js/dark_mode.js?9b17307bb950ffa2e34be0227f53558f"></script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"><span class="font-weight-bold">Michael </span>L. Chang</a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about</a> </li> <li class="nav-item "> <a class="nav-link" href="/publications/">publications</a> </li> <li class="nav-item "> <a class="nav-link" href="/projects/">projects</a> </li> <li class="nav-item "> <a class="nav-link" href="/resume/">resume</a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="fa-solid fa-moon"></i> <i class="fa-solid fa-sun"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5"> <div class="post"> <header class="post-header"> <h1 class="post-title">Map of Photographers</h1> <p class="post-description">An Android app created to introduce photographers to new scenic spots</p> </header> <article> <h4 id="authors">Authors</h4> <p>Michael Chang and Jooyeon Yang</p> <h2 id="1-introduction">1. Introduction</h2> <p>When we travel to a new city, we are always excited by popular restaurants and cafe there. Besides food, a hidden photo spot also inspires us! We can also have fun while searching and walking to the location which is shared by others. Also imagine that you open our app in the city you’re living in for years, and just found that there’re still locations you’ve never been to (maybe they are places you walk by everyday but never pay attention to).</p> <p>That’s the reason we are going to launch our app, which provides an intuitive platform for users to upload / manage / browse photo based on geographical information, and allows users to be inspired by photo spots or re-discover their cities.</p> <p>Users are able to share their photos with a brief description. Once they’re uploaded, geographical infromation will be extracted from EXIF data and the photo will be pinned into the map. Other metadata such as focal length, shutter speed, etc. will also be recorded and shown once user clicks on that photo.</p> <p>Users can also browse photos shared by others, and like their photos. They can also search photos by either user name or camera setting. For example, if you only bring your ultra-wide camera lens while traveling, you could find photos by searching <code class="language-plaintext highlighter-rouge">16mm</code> in Dashboard.</p> <h2 id="2-screenshots">2. Screenshots</h2> <h3 id="21-home">2.1 Home</h3> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project_mapforphotographers-home.gif-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project_mapforphotographers-home.gif-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project_mapforphotographers-home.gif-1400.webp"></source> <img src="/assets/img/project_mapforphotographers-home.gif" class="img-fluid rounded z-depth-1" width="290" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>A map embedded with public photo markers on it. Photo markers will be resized when zooming in or out, to avoid unreasonable image size shown in the map. When a user click a image, an activity with image details is opened (see section Activity_Single_Image).</p> <h3 id="22-dashboard">2.2 Dashboard</h3> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project_mapforphotographers-dashboard.gif-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project_mapforphotographers-dashboard.gif-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project_mapforphotographers-dashboard.gif-1400.webp"></source> <img src="/assets/img/project_mapforphotographers-dashboard.gif" class="img-fluid rounded z-depth-1" width="290" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Here in Dashboard, users can browsing public photos (in upload timestamp order, the most recent one is shown first). There is a search bar, and users can search anything like title (e.g., <code class="language-plaintext highlighter-rouge">doggo</code>) or exposure time (e.g., <code class="language-plaintext highlighter-rouge">10s</code>).</p> <h3 id="23-profile">2.3 Profile</h3> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project_mapforphotographers-login.gif-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project_mapforphotographers-login.gif-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project_mapforphotographers-login.gif-1400.webp"></source> <img src="/assets/img/project_mapforphotographers-login.gif" class="img-fluid rounded z-depth-1" width="290" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h4 id="firebase-authentication">Firebase Authentication</h4> <p>Here user can login through Firebase Authentication and manage their photos. After login, user can click their names (right after <code class="language-plaintext highlighter-rouge">Hi, </code>) to change it. To save the name change, either press enter or click the input field area. This display name will be shown in the details page when viewing a photo.</p> <h4 id="upload-photo">Upload Photo</h4> <p>At the bottom there is a upload button, and users can upload existing photo through it. After selecting a photo, exif data such as shutter speed, camera model will be extracted and shown. Users will have to provide title (required field) and description. In addition, if there’s GPS coordination, a marker will be placed in the embedded Google Maps. Otherwise, users have to click to place a marker in order to submit their photos. Users can set the photo privacy either private (only seen by owner) or public. After submitting the photos, users will be redirected back to profile page.</p> <h4 id="liked-photo">Liked Photo</h4> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project_mapforphotographers-liked.gif-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project_mapforphotographers-liked.gif-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project_mapforphotographers-liked.gif-1400.webp"></source> <img src="/assets/img/project_mapforphotographers-liked.gif" class="img-fluid rounded z-depth-1" width="290" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>There a text field showing how many photo a user has liked. By clicking the text field, the number is highlighted and users can browse photos they liked. Users can back to normal mode (viewing photos they uploaded) by click the text field again.</p> <h3 id="2x-activity_single_image">2.X Activity_Single_Image</h3> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project_mapforphotographers-single-image.gif-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project_mapforphotographers-single-image.gif-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project_mapforphotographers-single-image.gif-1400.webp"></source> <img src="/assets/img/project_mapforphotographers-single-image.gif" class="img-fluid rounded z-depth-1" width="290" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>Here users can view the details and geo-location of a photo. At the button users can like / unlike a photo. By clicking the thumbnail, users can view the photo in full-screen mode. If user is the owner of photo, a trashcan icon will be shown and user is able to delete the photo.</p> <h2 id="3-api-used--third-party-libraries">3. API used / Third party libraries</h2> <h4 id="recyclerview">RecyclerView</h4> <p>RecyclerView is used in Dashboard and Profile fragments, for showing photos in grid layouts.</p> <h4 id="firebase-authentication-1">Firebase Authentication</h4> <p>Firebase Authentication is used for user login / logout. After user login, they have unique <code class="language-plaintext highlighter-rouge">uid</code> and can upload / like photos, and view their private photos. They can also delete their own photos after uploading (by compare <code class="language-plaintext highlighter-rouge">ownerUid</code> of photo and their <code class="language-plaintext highlighter-rouge">uid</code>).</p> <h4 id="cloud-storage-for-firebase">Cloud Storage for Firebase</h4> <p>We use Google Cloud Storage for managing uploaded photos.</p> <h4 id="cloud-firestore">Cloud Firestore</h4> <p>We use Google Cloud Firestore Database for managing detailed information of photos, and who liked the photos (as an array of <code class="language-plaintext highlighter-rouge">uid</code> in each photo).</p> <h4 id="google-maps">Google Maps</h4> <p>Google Maps are embedded in several fragments / activities in our project. We use it to show the location where a photo was taken, pinning markers on it, and also for Geocoding.</p> <h4 id="glide">Glide</h4> <p>We use glide for downloading and rendering photo stored in Google Cloud Storage. To show photos as markers in Maps, we also called Glide to get <code class="language-plaintext highlighter-rouge">Bitmap</code> (instead of rendering into image view) by using <code class="language-plaintext highlighter-rouge">get()</code>.</p> <h4 id="exif">EXIF</h4> <p>This is a key library we used in this project. Basically it will extract detailed information (e.g., data captured, location, camera model, aperture, etc.) and we will save that in Firestore database. However, some of the returns are not in the format we usually use. For example, <code class="language-plaintext highlighter-rouge">TAG_SHUTTER_SPEED_VALUE</code> is in APEX format, and we have another function to covert it to exposure time (unit is second).</p> <h4 id="parcelize">Parcelize</h4> <p>When viewing a single photo, it will create an activity and pass the information of a photo via intent. Instead of using a bunch of <code class="language-plaintext highlighter-rouge">getStringExtra</code>, we set our class <code class="language-plaintext highlighter-rouge">Parcelable</code> so that we can pass the instance via <code class="language-plaintext highlighter-rouge">getParcelableExtra</code> once.</p> <h4 id="reflect">Reflect</h4> <p>We have search function in Dashboard fragment, and it simply searches anything matched in the photos. For example, you can search for either exposure time (e.g., <code class="language-plaintext highlighter-rouge">10s</code>) or the title of photo. To achieve that in a simple way, in <code class="language-plaintext highlighter-rouge">filterList</code> function we use <code class="language-plaintext highlighter-rouge">class.memberProperties</code> to iterate over all the member in a class (except for some sensitive data like uid) and search them.</p> <h2 id="4-uiuxdisplay">4. UI/UX/display</h2> <h4 id="resizable-markers">Resizable markers</h4> <p>In Home fragment, we have a embedded Google Maps and markers with photos on it. Instead of getting unreasonable markers size (like blocking the whole map), we use <code class="language-plaintext highlighter-rouge">setOnCameraIdleListener</code> and check if zoom is changed. If so, we will re-draw all the markers based on the zooming value we have.</p> <h4 id="full-screen-view">Full-screen view</h4> <p>When users are viewing a single photo, they can click on the thumbnail to enter full-screen view. Instead of getting overhead creating another fragment or activity, we used a hidden imageview and only shows it when user click on the thumbnail. It also helps to load the image in background (with Glide) when the activity is loaded.</p> <h2 id="5-back-end-and-processing-logic">5. Back-end and processing logic</h2> <h4 id="manage-likes-by-users">Manage likes by users</h4> <p>Here a list of users who like a photo is integrated inside the document of photo. We use this way instead of creating another collection because when we are looking for photos a specific user (with <code class="language-plaintext highlighter-rouge">uid</code>) who likes, we can just use <code class="language-plaintext highlighter-rouge">whereArrayContains</code> to filter out. To add / remove a user into liked list, we use <code class="language-plaintext highlighter-rouge">arrayUnion</code> / <code class="language-plaintext highlighter-rouge">arrayRemove</code>.</p> <h2 id="6-interesting-thing-we-learned">6. Interesting thing we learned</h2> <p>We have leaned how to combine functions we implemented from flip classrooms and homework together and use them in our final project. It is also quite interesting to learn that we can <code class="language-plaintext highlighter-rouge">parcelize</code> a class and pass it in intent.</p> <h2 id="7-difficult-challenge">7. Difficult challenge</h2> <p>It is challenging for showing photo stored in Google Cloud Storage as markers in Google Maps with Glide because it’s not like a image view. We’ve done searches and found that we can use Bitmap as a return type from Glide and render that in Maps.</p> <p>We also found that the timing for refreshing list of RecyclerView is challenging because we use Activity for image uploading but the parent is a fragment. Instead of messing with <code class="language-plaintext highlighter-rouge">registerForActivityResult</code>, we simply overriding fun <code class="language-plaintext highlighter-rouge">onResume</code> in parent fragment. Each time the upload is completed and fragment is resumed, we refresh the list.</p> <h2 id="8-how-to-build--run-our-project">8. How to build / run our project</h2> <p>We have provided our <code class="language-plaintext highlighter-rouge">google-services.json</code> in the <code class="language-plaintext highlighter-rouge">/app</code> folder. You are able to build our project directly and run it in emulator or physical phone. For Firebase authentication, you can use <code class="language-plaintext highlighter-rouge">fake@example.com</code> with password <code class="language-plaintext highlighter-rouge">123456</code> or create your own account while login.</p> <h2 id="9-database-schema">9. Database schema</h2> <figure> <picture> <source class="responsive-img-srcset" media="(max-width: 480px)" srcset="/assets/img/project_mapforphotographers-database-480.webp"></source> <source class="responsive-img-srcset" media="(max-width: 800px)" srcset="/assets/img/project_mapforphotographers-database-800.webp"></source> <source class="responsive-img-srcset" media="(max-width: 1400px)" srcset="/assets/img/project_mapforphotographers-database-1400.webp"></source> <img src="/assets/img/project_mapforphotographers-database.png" class="img-fluid rounded z-depth-1" width="700" height="auto" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h2 id="10-count-of-lines-of-code">10. Count of lines of code</h2> <ul> <li>Kotlin: 1513</li> <li>XML: 1031</li> </ul> </article> </div> </div> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@4/imagesloaded.pkgd.min.js"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.0.8/dist/medium-zoom.min.js" integrity="sha256-7PhEpEWEW0XXQ0k6kQrPKwuoIomz8R8IYyuU1Qew4P8=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?7b30caa5023af4af8408a472dc4e1ebb"></script> <script defer src="https://unpkg.com/bootstrap-table@1.22.1/dist/bootstrap-table.min.js"></script> <script src="/assets/js/no_defer.js?d633890033921b33e0ceb13d22340a9c"></script> <script defer src="/assets/js/common.js?acdb9690d7641b2f8d40529018c71a01"></script> <script defer src="/assets/js/copy_code.js?07b8786bab9b4abe90d10e61f7d12ff7" type="text/javascript"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.js"></script> <script defer src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script> <script async src="https://www.googletagmanager.com/gtag/js?id=G-FJ6KMF48XE"></script> <script>function gtag(){window.dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-FJ6KMF48XE");</script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>